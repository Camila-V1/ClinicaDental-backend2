# ============================================================================
# VARIABLES DE ENTORNO - CLÍNICA DENTAL BACKEND
# ============================================================================
# Copia este archivo a .env y configura tus valores
# ============================================================================

# ============================================================================
# CONFIGURACIÓN GENERAL
# ============================================================================
DEBUG=False
SECRET_KEY=zd81!_&!uwb0b$#$th-gxns18ygqkd++4%lk)w=d5ziu(62&t9

# ============================================================================
# DOMINIO Y HOSTS
# ============================================================================
# Lista de hosts permitidos separados por coma
# Para multi-tenant con subdominios, usa .onrender.com (permite *.onrender.com)
ALLOWED_HOSTS=localhost,127.0.0.1,.localhost,.onrender.com

# Dominio principal de la aplicación (sin https://)
DOMAIN=tu-app.onrender.com

# ============================================================================
# BASE DE DATOS POSTGRESQL
# ============================================================================
# Para desarrollo local
DB_NAME=db_clinica_multitenant
DB_USER=postgres
DB_PASSWORD=12345678
DB_HOST=127.0.0.1
DB_PORT=5432

# Para Render (usa DATABASE_URL automáticamente)
# DATABASE_URL se proporciona automáticamente por Render
# Formato: postgresql://user:password@host:port/database
# Ejemplo: postgresql://clinica_user:password@dpg-xxxxx.oregon-postgres.render.com/clinica_dental_prod

# ============================================================================
# CONFIGURACIÓN DE CORS
# ============================================================================
# Orígenes permitidos separados por coma (sin espacios)
# NOTA: Los subdominios ya están permitidos por regex en settings.py
# Solo agrega dominios principales aquí
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,https://tu-frontend.vercel.app

# Subdominios permitidos (regex)
CORS_ALLOWED_ORIGIN_REGEXES=^http://[\w-]+\.localhost:\d+$

# ============================================================================
# CSRF
# ============================================================================
# Orígenes de confianza para CSRF separados por coma
# En producción, usa wildcards para subdominios multi-tenant
# Ejemplo: https://*.onrender.com,https://*.vercel.app
CSRF_TRUSTED_ORIGINS=http://localhost:5173,http://localhost:3000,https://*.onrender.com,https://*.vercel.app

# ============================================================================
# ALMACENAMIENTO DE ARCHIVOS
# ============================================================================
# Opciones: 'local' o 's3'
STORAGE_BACKEND=local

# Si usas S3 (AWS)
AWS_ACCESS_KEY_ID=tu-access-key
AWS_SECRET_ACCESS_KEY=tu-secret-key
AWS_STORAGE_BUCKET_NAME=tu-bucket-name
AWS_S3_REGION_NAME=us-east-1

# ============================================================================
# CONFIGURACIÓN DE REDIS (CACHÉ)
# ============================================================================
# Para desarrollo local
REDIS_URL=redis://127.0.0.1:6379/0

# Para Render (se proporciona automáticamente si agregas Redis)
# REDIS_URL se configura automáticamente

# ============================================================================
# EMAIL (OPCIONAL - Para notificaciones)
# ============================================================================
EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=tu-email@gmail.com
EMAIL_HOST_PASSWORD=tu-app-password

# ============================================================================
# SUPABASE (Para backups)
# ============================================================================
SUPABASE_URL=https://tu-proyecto.supabase.co
SUPABASE_KEY=tu-service-role-key
SUPABASE_BUCKET_NAME=backups

# ============================================================================
# FIREBASE (Para notificaciones push - Sistema de valoraciones)
# ============================================================================
# IMPORTANTE: En Render, agrega esta variable en Environment
# El valor debe ser TODO el contenido del archivo JSON de credenciales
# Ejemplo: {"type":"service_account","project_id":"psicoadmin-94485",...}
FIREBASE_CREDENTIALS_JSON={"type":"service_account","project_id":"tu-proyecto-id","private_key_id":"...","private_key":"-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n","client_email":"firebase-adminsdk-xxx@tu-proyecto.iam.gserviceaccount.com","client_id":"...","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"...","universe_domain":"googleapis.com"}

# ============================================================================
# CONFIGURACIÓN DE LOGS
# ============================================================================
LOG_LEVEL=INFO

# ============================================================================
# TENANT POR DEFECTO
# ============================================================================
DEFAULT_TENANT_SCHEMA=clinica_demo
DEFAULT_TENANT_DOMAIN=clinica-demo

# ============================================================================
# NOTAS:
# ============================================================================
# 1. Nunca subas el archivo .env a git (ya está en .gitignore)
# 2. En Render, configura estas variables en el Dashboard > Environment
# 3. DATABASE_URL en Render se configura automáticamente al crear PostgreSQL
# 4. REDIS_URL en Render se configura automáticamente al crear Redis
# 5. Para SECRET_KEY usa: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
# ============================================================================
