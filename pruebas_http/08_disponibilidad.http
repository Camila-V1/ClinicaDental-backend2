###
# üóìÔ∏è PRUEBAS: Endpoint de Disponibilidad de Horarios
# Endpoint: GET /api/agenda/citas/disponibilidad/
#
# üîë TOKENS Y IDS FIJOS (simplificado):
# - Token Odont√≥logo: Ejecuta PASO 0 primero
# - Token Paciente: Ejecuta PASO 1 primero
# - ID Odont√≥logo: 1 (Dr. Juan P√©rez - perfil_odontologo.id)
###

### PASO 0: Login como ODONT√ìLOGO (para consultas como odont√≥logo)
# @name loginOdonto
POST http://clinica-demo.localhost:8000/api/token/
Content-Type: application/json

{
  "email": "odontologo@clinica-demo.com",
  "password": "odontologo123"
}

###

### PASO 1: Login como PACIENTE (para consultas como paciente)
# @name loginPaciente
POST http://clinica-demo.localhost:8000/api/token/
Content-Type: application/json

{
  "email": "paciente@test.com",
  "password": "paciente123"
}

###

### 2. üìÖ Consultar disponibilidad - Fecha y odont√≥logo v√°lidos (como PACIENTE)
# Fecha: 2025-11-20 (mi√©rcoles futuro)
# ID Odont√≥logo: 1 (Dr. Juan P√©rez)
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-20&odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 3. üìÖ Consultar disponibilidad - Ma√±ana (como PACIENTE)
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-10&odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 4. üìÖ Consultar disponibilidad - Hoy (como PACIENTE)
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-09&odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 5. üìÖ Odont√≥logo consulta su propia disponibilidad
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-20&odontologo_id=1
Authorization: Bearer {{loginOdonto.response.body.access}}
Host: clinica-demo.localhost

### 6. üìÖ Consultar disponibilidad - Fin de semana (deber√≠a estar todo libre)
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-15&odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

###
# ‚ùå PRUEBAS DE ERROR
###

### 7. ‚ùå ERROR: Sin par√°metro fecha
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 8. ‚ùå ERROR: Sin par√°metro odontologo_id
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-20
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 9. ‚ùå ERROR: Formato de fecha inv√°lido
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=20-11-2025&odontologo_id=1
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

### 10. ‚ùå ERROR: Odont√≥logo no existe
GET http://clinica-demo.localhost:8000/api/agenda/citas/disponibilidad/?fecha=2025-11-20&odontologo_id=999
Authorization: Bearer {{loginPaciente.response.body.access}}
Host: clinica-demo.localhost

###
# üìù RESPUESTA ESPERADA:
# {
#   "fecha": "2025-11-20",
#   "odontologo": {
#     "id": 1,
#     "nombre_completo": "Dr. Juan P√©rez",
#     "especialidad": "Odontolog√≠a General"
#   },
#   "horarios_disponibles": [
#     "09:00", "09:30", "10:00", "10:30", "11:00", 
#     "11:30", "12:00", "12:30", "13:00", "13:30",
#     "14:00", "14:30", "15:00", "15:30", "16:00",
#     "16:30", "17:00", "17:30"
#   ],
#   "horarios_ocupados": ["11:00", "14:30"],
#   "horario_atencion": {
#     "inicio": "09:00",
#     "fin": "18:00",
#     "intervalo_minutos": 30
#   },
#   "total_disponibles": 16,
#   "total_ocupados": 2
# }
###

###
# üìå NOTAS:
# - El horario por defecto es 9am - 6pm
# - Intervalo de 30 minutos entre citas
# - Solo se muestran horarios donde NO hay citas PENDIENTES, CONFIRMADAS o ATENDIDAS
# - Las citas CANCELADAS NO ocupan el horario
# - En el futuro, el horario deber√≠a ser configurable por odont√≥logo
###
